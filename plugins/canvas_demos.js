var rotate_image = {"title":"Rotate Image","description":"","date":1335540182471,"scripts":[{"klass":"image manipulation","label":"when image at url [string] loads","script":"(function(){var i = new Image();i.src = {{1}};$(i).load(function(){var can = $(\"<canvas>\")[0];can.height=i.height;can.width=i.width;can.getContext(\"2d\").drawImage(i, 0, 0);try{local.imagedata_1 = can.getContext(\"2d\").getImageData(0, 0, i.width, i.height);} catch (e){if(typeof(netscape) !== \"undefined\"){netscape.security.PrivilegeManager.enablePrivilege(\"UniversalBrowserRead\");}local.imagedata_1 = can.getContext(\"2d\").getImageData(0, 0, i.width, i.height);}[[1]]});})()","containers":1,"trigger":true,"locals":[{"script":"local.imagedata_1","label":"imagedata_1","klass":"image manipulation","type":"imagedata"}],"sockets":["http://localhost:8000/test.jpg"],"contained":[{"klass":"variables","label":"variable imagedata_2 [imagedata]","script":"local.imagedata_2 = {{1}};","containers":0,"locals":[],"returns":{"label":"imagedata_2","script":"local.imagedata_2","type":"imagedata","klass":"variables"},"sockets":[{"klass":"image manipulation","label":"new ImageData with size [size]","script":"(function(){ return local.ctx.createImageData({{1}}.w,{{1}}.h);})()","containers":0,"type":"imagedata","locals":[],"sockets":[{"klass":"size","label":"size with width [number:10] height [number:10]","script":"{w: {{1}}, h: {{1}}}","containers":0,"type":"size","locals":[],"sockets":[{"klass":"image manipulation","label":"imageData [imagedata] height","script":"{{1}}.height","containers":0,"type":"number","locals":[],"sockets":[{"klass":"image manipulation","label":"imagedata_1","script":"local.imagedata_1","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""},{"klass":"image manipulation","label":"imageData [imagedata] width","script":"{{1}}.width","containers":0,"type":"number","locals":[],"sockets":[{"klass":"image manipulation","label":"imagedata_1","script":"local.imagedata_1","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[],"next":{"klass":"control","label":"repeat [number:10]","script":"for (local.index_3 = 0; local.index_3 < {{1}}; local.index_3++){[[1]]};","containers":1,"locals":[{"script":"local.index_3","label":"loop index_3","klass":"control","type":"number"}],"sockets":[{"klass":"image manipulation","label":"imageData [imagedata] height","script":"{{1}}.height","containers":0,"type":"number","locals":[],"sockets":[{"klass":"image manipulation","label":"imagedata_1","script":"local.imagedata_1","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[{"klass":"control","label":"repeat [number:10]","script":"for (local.index_4 = 0; local.index_4 < {{1}}; local.index_4++){[[1]]};","containers":1,"locals":[{"script":"local.index_4","label":"loop index_4","klass":"control","type":"number"}],"sockets":[{"klass":"image manipulation","label":"imageData [imagedata] width","script":"{{1}}.width","containers":0,"type":"number","locals":[],"sockets":[{"klass":"image manipulation","label":"imagedata_1","script":"local.imagedata_1","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[{"klass":"variables","label":"variable pixel_5 [pixel]","script":"local.pixel_5 = {{1}};","containers":0,"locals":[],"returns":{"label":"pixel_5","script":"local.pixel_5","type":"pixel","klass":"variables"},"sockets":[{"klass":"image manipulation","label":"get pixel at coordinates [number:0] [number:0] from [imagedata]","script":"(function(){ var data = {{3}}.data; var redIndex = ({{1}} * 4) + ({{2}} * {{3}}.width * 4); return { r: data[redIndex], g: data[redIndex + 1], b: data[redIndex + 2]};})()","containers":0,"type":"pixel","locals":[],"sockets":[{"klass":"control","label":"loop index_4","script":"local.index_4","containers":0,"type":"number","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"control","label":"loop index_3","script":"local.index_3","containers":0,"type":"number","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"image manipulation","label":"imagedata_1","script":"local.imagedata_1","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[],"next":{"klass":"image manipulation","label":"put pixel [pixel] to [imagedata] at point [point]","script":"(function(){ var data = {{2}}.data; var x = {{3}}.x; var y = {{3}}.y; var redIndex = (x * 4) + (y * {{2}}.width * 4); data[redIndex] = {{1}}.r; data[redIndex + 1] = {{1}}.g; data[redIndex + 2] = {{1}}.b; data[redIndex + 3] = 255;})();","containers":0,"locals":[],"sockets":[{"klass":"variables","label":"pixel_5","script":"local.pixel_5","containers":0,"type":"pixel","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"variables","label":"imagedata_2","script":"local.imagedata_2","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"point","label":"point at x [number:0] y [number:0]","script":"{x: {{1}}, y: {{2}}}","containers":0,"type":"point","locals":[],"sockets":[{"klass":"control","label":"loop index_3","script":"local.index_3","containers":0,"type":"number","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"control","label":"loop index_4","script":"local.index_4","containers":0,"type":"number","locals":[],"sockets":[],"contained":[],"next":""}],"contained":[],"next":""}],"contained":[],"next":""}}],"next":""}],"next":{"klass":"image manipulation","label":"draw imageData [imagedata] at point [point]","script":"local.ctx.putImageData({{1}},{{2}}.x,{{2}}.y);","containers":0,"locals":[],"sockets":[{"klass":"variables","label":"imagedata_2","script":"local.imagedata_2","containers":0,"type":"imagedata","locals":[],"sockets":[],"contained":[],"next":""},{"klass":"point","label":"point at x [number:0] y [number:0]","script":"{x: {{1}}, y: {{2}}}","containers":0,"type":"point","locals":[],"sockets":["0","0"],"contained":[],"next":""}],"contained":[],"next":""}}}],"next":""}]}
var demos = [ rotate_image ]

populate_demos_dialog(demos);
